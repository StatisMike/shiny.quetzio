---
output: github_document
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "man/figures/README-",
  out.width = "100%"
)
```

# shiny.survey

<!-- badges: start -->
[![Lifecycle: stable](https://img.shields.io/badge/lifecycle-stable-brightgreen.svg)](https://lifecycle.r-lib.org/articles/stages.html#stable)
<!-- badges: end -->

This package includes the way to create a survey using various Shiny widgets
from a source file: either a local YAML file, or GoogleSheet over the net.
Results of the surveys are send to GoogleSheet of your choice.

It is all completely handled by `R6` shiny modules, so it is easy to include 
even multiple `shiny.survey`s in your ShinyApp and have your code clean!

## Installation

You can install the development version of shiny.survey from [GitHub](https://github.com/) with:

``` r
# install.packages("devtools")
devtools::install_github("StatisMike/shiny.survey")
```
## Current features

At the current stage of development the `shiny.survey` package consists of one
exported `R6` class: `shiny.survey_module`. It handles basic inputs:

- textInput
- numericInput
- selectizeInput
- radioButtons

### In-App usage

It's usage is very straigtforward:

1. At the beginning: create new `survey_module` in the `global.R` or outside
of the `ui` and `server` objects:

```{r, eval = F}
# using YAML source file

yaml_survey <- survey_module$new(
  source_method = "yaml",
  source_yaml = "some_yaml",
  output_gsheet_id = "googleSheet_id",
  output_gsheet_sheetname = "sheet_name_with_questions"
)

# or googlesheet source

gsheet_survey <- survey_module$new(
  source_method = "gsheet",
  source_gsheet_id = "googleSheet_id",
  source_gsheet_sheetname = "sheet_name_with_questions",
  # you don't need to specify another googleSheet file to save answers
  # If you don't specify it, the class assumes it is the same as source one
  output_gsheet_id = "another_googleSheet_id",
  output_gsheet_sheetname = "sheet_name_with_answers"
)
```

2. After the object was created, simply call methods in the `ui` and `server` of
your ShinyApp!

```{r, eval = F}
  ui <- fluidPage(
     yaml_survey$ui()
  )
  server <- function(input, output, session){
     my_survey <- yaml_survey$server()
  }
```

3. Additionally, your ShinyApp can monitor the survey status!

```{r, eval = F}
# logical checking if the survey has been send (TRUE) or no (FALSE)
  my_survey$is_done 

# if there were some errors, `is_done` will be NA, and additionally
# the error message can be retrieved also!
  my_survey$message
```

### Survey configuration

You can configure your survey widely, using many of the features native to the
used shiny inputs. 

#### Universal parameters:

For every input you can specify:

- **inputId**
- **type**
- **label**
- mandatory: (true/false) if the input must be filled
- width: the same as in regular input specification. If not provided, defaults
to 500px

> *Bold* ones are mandatory for every input

#### Type-specific parameters:


|    parameter   |  textInput |numericInput|selectizeInput|radioButtons|
|    :----:      |   :----:   |   :----:   |    :----:    |   :----:   |
|placeholder     |      x     |            |              |            |    
|value           |            |     x      |              |            |    
|min             |            |     x      |              |            |    
|max             |            |     x      |              |            |    
|step            |            |     x      |              |            |    
|*choices*       |            |            |       x      |      x     |    
|*choiceValues*  |            |            |       x      |      x     |    
|*choiceNames*   |            |            |       x      |      x     |    
|multiple        |            |            |       x      |            |    
|selected        |            |            |       x      |      x     |    
|inline          |            |            |              |      x     |    

>*Italic* parameters are interchangeable. You can specify either *choices* or both *choiceValues* and *choiceNames* for single input.

## Presentation

You can check the running demo on [shinyapps.io](https://statismik.shinyapps.io/shinysurvey_sneakpeek/){target="_blank"}

## discoRd kudos

Foundations for this package is in the 'discoRd' community, most notably users
who created the underlying logic for the  [discoRd-survey](https://github.com/discoRd-org/discoRd-survey){target="_blank"}:

- Alexander Lam ([acylam](https://github.com/acylam){target="_blank"})
- Erez Shomron ([eshom](https://github.com/eshom){target="_blank"})
- Eric Fletcher ([iamericfletcher](https://github.com/iamericfletcher){target="_blank"})

Feel free to join our great community at [discoRd channel](https://discord.gg/FuTSvkSCVj){target="_blank"}!
