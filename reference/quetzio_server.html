<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Create R6-based server module to generate and hold the state
of your questionnaire"><title>Quetzio Server class — quetzio_server • shiny.quetzio</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Quetzio Server class — quetzio_server"><meta property="og:description" content="Create R6-based server module to generate and hold the state
of your questionnaire"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">shiny.quetzio</a>

    <small class="nav-text text-danger me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Unreleased version">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/create_quetzio.html">Create a questionnaire</a>
    <a class="dropdown-item" href="../articles/update_quetzio.html">Update created questionnaire</a>
    <a class="dropdown-item" href="../articles/link_quetzio.html">Link multiple questionnaires together</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Quetzio Server class</h1>
      
      <div class="d-none name"><code>quetzio_server.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Create R6-based server module to generate and hold the state
of your questionnaire</p>
    </div>


    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>quetzio_UI</p></div>
    </div>
    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>source_list</code></dt>
<dd><p>List containing the data for all the inputs</p></dd>


<dt><code>description</code></dt>
<dd><p>List containing survey instruction and description</p></dd>


<dt><code>div_id</code></dt>
<dd><p>ID of the div containing the survey UI</p></dd>


<dt><code>module_id</code></dt>
<dd><p>ID of the shiny module</p></dd>


<dt><code>is_done</code></dt>
<dd><p>logical reactiveVal indicating if the survey has been completed</p></dd>


<dt><code>message</code></dt>
<dd><p>reactiveVal catching any messages from object</p></dd>


<dt><code>answers</code></dt>
<dd><p>reactiveVal object containing list with answers to questions</p></dd>


<dt><code>order</code></dt>
<dd><p>Indices of questions in order of their appearance, if you
wished to randomize their order. Otherwise NULL</p></dd>


<dt><code>module_ui_id</code></dt>
<dd><p>character string used to generate UI. It needs to
be modified when linking the questionnaires</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>
    
<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-toggle_ui"><code>quetzio_server$toggle_ui()</code></a></p></li>
<li><p><a href="#method-new"><code>quetzio_server$new()</code></a></p></li>
<li><p><a href="#method-get_answers_df"><code>quetzio_server$get_answers_df()</code></a></p></li>
<li><p><a href="#method-update_labels"><code>quetzio_server$update_labels()</code></a></p></li>
<li><p><a href="#method-update_values"><code>quetzio_server$update_values()</code></a></p></li>
<li><p><a href="#method-clone"><code>quetzio_server$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-toggle_ui"></a><div class="section">
<h3 id="method-toggle-ui-">Method <code>toggle_ui()</code><a class="anchor" aria-label="anchor" href="#method-toggle-ui-"></a></h3>
<p>method to change the state of the UI</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">quetzio_server</span><span class="op">$</span><span class="fu">toggle_ui</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>x</code></dt>
<dd><p>logical indicating what should be the state of the UI. If TRUE,
then the UI will be rendered.</p></dd>


</dl><p></p></div>
</div>

</div><p></p><hr><a id="method-new"></a><div class="section">
<h3 id="method-new-">Method <code><a href="https://rdrr.io/r/methods/new.html" class="external-link">new()</a></code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Initializing the 'quetzio_server' object</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va"><a href="../reference/quetzio_server.html">quetzio_server</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
  <span class="va">source_method</span>,
  source_yaml <span class="op">=</span> <span class="cn">NULL</span>,
  source_yaml_default <span class="op">=</span> <span class="cn">NULL</span>,
  source_gsheet_id <span class="op">=</span> <span class="cn">NULL</span>,
  source_gsheet_sheetname <span class="op">=</span> <span class="cn">NULL</span>,
  source_object <span class="op">=</span> <span class="cn">NULL</span>,
  source_object_default <span class="op">=</span> <span class="cn">NULL</span>,
  output_gsheet <span class="op">=</span> <span class="cn">FALSE</span>,
  output_gsheet_id <span class="op">=</span> <span class="cn">NULL</span>,
  output_gsheet_sheetname <span class="op">=</span> <span class="cn">NULL</span>,
  desc_yaml <span class="op">=</span> <span class="cn">NULL</span>,
  desc_gsheet_id <span class="op">=</span> <span class="cn">NULL</span>,
  desc_gsheet_sheetname <span class="op">=</span> <span class="cn">NULL</span>,
  desc_object <span class="op">=</span> <span class="cn">NULL</span>,
  randomize_order <span class="op">=</span> <span class="cn">FALSE</span>,
  module_id <span class="op">=</span> <span class="cn">NULL</span>,
  div_id <span class="op">=</span> <span class="cn">NULL</span>,
  custom_css <span class="op">=</span> <span class="cn">NULL</span>,
  lang <span class="op">=</span> <span class="st">"en"</span>,
  custom_txts <span class="op">=</span> <span class="cn">NULL</span>,
  use_modal <span class="op">=</span> <span class="cn">TRUE</span>,
  render_ui <span class="op">=</span> <span class="cn">TRUE</span>,
  link_id <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>source_method</code></dt>
<dd><p>character string specifying in what form the source
config file will be provided. Can be either 'gsheet', 'yaml' or 'raw'.
Necessity of other arguments is dependent on this choice. For more info
see 'details'</p></dd>


<dt><code>source_yaml</code></dt>
<dd><p>path to the source yaml file</p></dd>


<dt><code>source_yaml_default</code></dt>
<dd><p>path to the optional default options for items
generated with source list. Only when <code>source_method == 'yaml'</code> or
<code>source_method == 'raw'</code> and source object of class <code>list</code> is povided..</p></dd>


<dt><code>source_gsheet_id</code></dt>
<dd><p>id of the source googlesheet file</p></dd>


<dt><code>source_gsheet_sheetname</code></dt>
<dd><p>name of the source spreadsheet</p></dd>


<dt><code>source_object</code></dt>
<dd><p>object of class <code>list</code> (similiar in structure to
'yaml' source) or <code>data.frame</code> (similiar in structure to 'googlesheet'
source) to be the source of questions. You can create a sample data.frame
with <code>create_survey_source()</code>. Needed when <code>source_method == 'raw'</code></p></dd>


<dt><code>source_object_default</code></dt>
<dd><p>list containing optional default options for
items generated with source list. Only when <code>source_method == 'yaml'</code> or
<code>source_method == 'raw'</code> and source object of class <code>list</code> is povided.</p></dd>


<dt><code>output_gsheet</code></dt>
<dd><p>logical: do you wish to save the answers automatically
to the googlesheet. If TRUE, the 'output_gsheet_id' and 'output_gsheet_sheetname'
arguments need to be specified. Defaults to FALSE</p></dd>


<dt><code>output_gsheet_id</code></dt>
<dd><p>id of the output googlesheet file. If not specified,
the same googlesheet as for 'source' will be used</p></dd>


<dt><code>output_gsheet_sheetname</code></dt>
<dd><p>name of the output spreadsheet</p></dd>


<dt><code>desc_yaml</code></dt>
<dd><p>path to the optional instruction and item
descriptions.</p></dd>


<dt><code>desc_gsheet_id</code></dt>
<dd><p>id of the googlesheet to provide optional instruction
and item descriptions. Defaults to 'source_gsheet_id', if not provided.</p></dd>


<dt><code>desc_gsheet_sheetname</code></dt>
<dd><p>name of source for optional instruction and
item descriptions.</p></dd>


<dt><code>desc_object</code></dt>
<dd><p>object of class <code>list</code> or <code>data.frame</code> to be the source
of optional instruction and item descriptions.</p></dd>


<dt><code>randomize_order</code></dt>
<dd><p>logical: do you wish to randomize order in which the
items will appear? Defaults to FALSE</p></dd>


<dt><code>module_id</code></dt>
<dd><p>character string with unique id for the module. If not
specified, it will be automatically generated</p></dd>


<dt><code>div_id</code></dt>
<dd><p>character string with unique id for the created div. If not
specified, it will be set to 'form'</p></dd>


<dt><code>custom_css</code></dt>
<dd><p>custom css for classes 'mandatory star' and 'invalid_input'.
If not specified, default look will be used:</p><ul><li><p>invalid_input = "outline: red; outline-style: dashed; outline-offset: 10px;"</p></li>
<li><p>mandatory_star = "color: red;"</p></li>
<li><p>quetzio_submit = "color: #fff; background-color: #337ab7; border-color: #2e6da4; width: 200px;"</p></li>
<li><p>quetzio_description = "font-size: 0.9em;"</p></li>
</ul><p>You can also add styles for different classes contained within the div
of the questionnaire - styles will be affecting only elements within
this specific questionnaire.</p></dd>


<dt><code>lang</code></dt>
<dd><p>language to use. For now only 'en' and 'pl' are supported.</p></dd>


<dt><code>custom_txts</code></dt>
<dd><p>named list with custom labels for specified language.
For more information look upon documentation for 'quetzio_txt'</p></dd>


<dt><code>use_modal</code></dt>
<dd><p>logical indicating if modalDialog for invalid inputs
should be triggered. Defaults to TRUE</p></dd>


<dt><code>render_ui</code></dt>
<dd><p>logical indicating if the UI for questionnaire should be
rendered</p></dd>


<dt><code>link_id</code></dt>
<dd><p>character specifying the 'link_id' of the 'quetzio_link_server'
object, modifying its namespace. Only used internally, if the questionnaire
is part of linked server. Don't set it manually!</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h4>
<p>Currently, there are multiple methods both for source, which will generate
the inputs, and for output. Mandatory arguments change depending of your
choices:</p><ul><li><p>for source:</p><ul><li><p><code>source_method == 'yaml'</code>: 'source_yaml'</p></li>
<li><p><code>source_method == 'gsheet'</code>: 'source_gsheet_id,' 'source_gsheet_sheetname'</p></li>
<li><p><code>source_method == 'raw'</code>: 'source_object'</p></li>
</ul></li>
<li><p>for output:</p><ul><li><p><code>output_gsheet == TRUE</code>: 'output_gsheet_id' (if other than 'source_gsheet_id')
and 'output_gsheet_sheetname'</p></li>
</ul></li>
</ul><p>There are also some optional functionalities, that can be used with sources.</p><ul><li><p>optional instructions and item descriptions - they are generated only
if one of the following is provided:</p><ul><li><p><code>desc_yaml</code>: rendering from YAML file</p></li>
<li><p><code>desc_gsheet_sheetname</code>: rendering from googlesheet. If the <code>source_method</code>
isn't <code>gsheet</code> or the 'googlesheet_id' containing description is different
from source, the <code>desc_gsheet_id</code> need to be provided too</p></li>
<li><p><code>desc_object</code>: rendering from R object of classes 'data.frame' or 'list'</p></li>
</ul></li>
<li><p>optional default configuration - it is used for a type of shinyInput.
Need to provide <code>source_yaml_default</code> - there are no other methods ATM.</p></li>
</ul></div>

<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>the 'quetzio_server' serverModule</p>
</div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span class="co">## Only run example in interactive R sessions</span>

<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>

 <span class="co"># load libraries</span>
 <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span>
 <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://statismike.github.io/shiny.quetzio/">shiny.quetzio</a></span><span class="op">)</span>

 <span class="co"># create ui</span>
 <span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span>
   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">6</span>, align <span class="op">=</span> <span class="st">"center"</span>,
          <span class="co"># bind the UI with correct module_id</span>
          <span class="fu"><a href="../reference/quetzio_UI.html">quetzio_UI</a></span><span class="op">(</span><span class="st">"my_quetzio"</span><span class="op">)</span>
   <span class="op">)</span>,
   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">6</span>,
          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h2</a></span><span class="op">(</span><span class="st">"State of"</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">i</span><span class="op">(</span><span class="st">"quetzio_server"</span><span class="op">)</span><span class="op">)</span>,
          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Is it done?"</span><span class="op">)</span>,
          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">verbatimTextOutput</a></span><span class="op">(</span><span class="st">"quetzio_is_done"</span><span class="op">)</span>,
          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Error messages?"</span><span class="op">)</span>,
          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">verbatimTextOutput</a></span><span class="op">(</span><span class="st">"quetzio_message"</span><span class="op">)</span>,
          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Answers"</span><span class="op">)</span>,
          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">verbatimTextOutput</a></span><span class="op">(</span><span class="st">"quetzio_answers"</span><span class="op">)</span>
   <span class="op">)</span>
 <span class="op">)</span>

 <span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>

   <span class="co"># initialize new quetzio</span>
   <span class="va">questionnaire</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/quetzio_server.html">quetzio_server</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
     <span class="co"># load questions from R object</span>
     source_method <span class="op">=</span> <span class="st">"raw"</span>,
     source_object <span class="op">=</span> <span class="va">quetzio_examples</span><span class="op">$</span><span class="va">questions_lists</span><span class="op">$</span><span class="va">simple_quetzio</span>,
     <span class="co"># optionally add descriptions</span>
     desc_object <span class="op">=</span> <span class="va">quetzio_examples</span><span class="op">$</span><span class="va">description_lists</span><span class="op">$</span><span class="va">simple_quetzio</span>,
     <span class="co"># use the same module_id as in UI binding</span>
     module_id <span class="op">=</span> <span class="st">"my_quetzio"</span>,
     <span class="co"># custom_css to give margin but not center options explicitly</span>
     <span class="co"># it will affect only elements within the form div</span>
     custom_css <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>
       <span class="st">"shiny-options-group"</span> <span class="op">=</span> <span class="st">"text-align: left; margin-left: 45%"</span>
     <span class="op">)</span>,
     <span class="co"># you can also optionally give div unique id - useful for external styling</span>
     div_id <span class="op">=</span> <span class="st">"my_questio_div_id"</span>
   <span class="op">)</span>

   <span class="co"># render objects to show your questionnaire status</span>
 <span class="va">output</span><span class="op">$</span><span class="va">quetzio_is_done</span> <span class="op">&lt;-</span>
     <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html" class="external-link">renderPrint</a></span><span class="op">(</span><span class="va">questionnaire</span><span class="op">$</span><span class="fu">is_done</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
   <span class="va">output</span><span class="op">$</span><span class="va">quetzio_message</span> <span class="op">&lt;-</span>
     <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html" class="external-link">renderPrint</a></span><span class="op">(</span><span class="va">questionnaire</span><span class="op">$</span><span class="fu">message</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
   <span class="va">output</span><span class="op">$</span><span class="va">quetzio_answers</span> <span class="op">&lt;-</span>
     <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html" class="external-link">renderPrint</a></span><span class="op">(</span><span class="va">questionnaire</span><span class="op">$</span><span class="fu">answers</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
 <span class="op">}</span>

 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span>

<span class="op">}</span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-get_answers_df"></a><div class="section">
<h3 id="method-get-answers-df-">Method <code>get_answers_df()</code><a class="anchor" aria-label="anchor" href="#method-get-answers-df-"></a></h3>
<p>method to get preprocessed answers in the form of dataframe
(only if all of the questionnaires are done)</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">quetzio_server</span><span class="op">$</span><span class="fu">get_answers_df</span><span class="op">(</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>data.frame</p>
</div>

</div><p></p><hr><a id="method-update_labels"></a><div class="section">
<h3 id="method-update-labels-">Method <code>update_labels()</code><a class="anchor" aria-label="anchor" href="#method-update-labels-"></a></h3>
<p>Method to update labels on the change in reactive</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">quetzio_server</span><span class="op">$</span><span class="fu">update_labels</span><span class="op">(</span>
  <span class="va">trigger</span>,
  <span class="va">source_method</span>,
  source_yaml <span class="op">=</span> <span class="cn">NULL</span>,
  source_gsheet_id <span class="op">=</span> <span class="cn">NULL</span>,
  source_gsheet_sheetname <span class="op">=</span> <span class="cn">NULL</span>,
  source_object <span class="op">=</span> <span class="cn">NULL</span>
<span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>trigger</code></dt>
<dd><p>reactive which will trigger the update. It needs to take
values linked to the changes in the source</p></dd>


<dt><code>source_method</code></dt>
<dd><p>character string specifying in what form the source
config file will be provided. Can be either 'gsheet', 'yaml' or 'raw'.
Necessity of other arguments is dependent on this choice</p></dd>


<dt><code>source_yaml</code></dt>
<dd><p>path to the source yaml file</p></dd>


<dt><code>source_gsheet_id</code></dt>
<dd><p>id of the source googlesheet file</p></dd>


<dt><code>source_gsheet_sheetname</code></dt>
<dd><p>name of the source spreadsheet</p></dd>


<dt><code>source_object</code></dt>
<dd><p>object of class <code>list</code> (similiar in structure to
'yaml' source) or <code>data.frame</code> (similiar in structure to 'googlesheet'
source) to be the source of questions. You can create a sample data.frame
with <code>create_survey_source()</code>. Needed when <code>source_method == 'raw'</code></p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span class="co">## only run examples in interactive environment</span>

<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>

 <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span>
 <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://statismike.github.io/shiny.quetzio/">shiny.quetzio</a></span><span class="op">)</span>

 <span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span>
   <span class="co"># some input to trigger label update</span>
   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectizeInput</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"What is your gender?"</span>,
                  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span> <span class="op">=</span> <span class="st">"M"</span>,
                              <span class="st">"Female"</span> <span class="op">=</span> <span class="st">"F"</span>,
                              <span class="st">"I identify as neither of above"</span> <span class="op">=</span> <span class="st">"O"</span>,
                              <span class="st">"Prefer not to say"</span> <span class="op">=</span> <span class="st">"NI"</span><span class="op">)</span>,
                  selected <span class="op">=</span> <span class="st">"NI"</span><span class="op">)</span>,
   <span class="va">tags</span><span class="op">$</span><span class="fu">hr</span><span class="op">(</span><span class="op">)</span>,
   <span class="co"># quetzio to update labels</span>
   <span class="fu"><a href="../reference/quetzio_UI.html">quetzio_UI</a></span><span class="op">(</span><span class="st">"updating_labels"</span><span class="op">)</span>
 <span class="op">)</span>

 <span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>

   <span class="va">quetzio</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/quetzio_server.html">quetzio_server</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
     source_method <span class="op">=</span> <span class="st">"raw"</span>,
     source_object <span class="op">=</span> <span class="va">quetzio_examples</span><span class="op">$</span><span class="va">questions_lists</span><span class="op">$</span><span class="va">gender_update</span>,
     module_id <span class="op">=</span> <span class="st">"updating_labels"</span>
   <span class="op">)</span>

   <span class="co"># trigger need to be reactive</span>
   <span class="va">gender_react</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span>

   <span class="co"># update labels method call</span>
   <span class="va">quetzio</span><span class="op">$</span><span class="fu">update_labels</span><span class="op">(</span>
     trigger <span class="op">=</span> <span class="va">gender_react</span>,
     source_method <span class="op">=</span> <span class="st">"raw"</span>,
     source_object <span class="op">=</span> <span class="va">quetzio_examples</span><span class="op">$</span><span class="va">label_update</span><span class="op">$</span><span class="va">gender_update</span>
   <span class="op">)</span>
 <span class="op">}</span>
 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span>
<span class="op">}</span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-update_values"></a><div class="section">
<h3 id="method-update-values-">Method <code>update_values()</code><a class="anchor" aria-label="anchor" href="#method-update-values-"></a></h3>
<p>Method to update selected values on the change in reactive</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">quetzio_server</span><span class="op">$</span><span class="fu">update_values</span><span class="op">(</span><span class="va">values</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>values</code></dt>
<dd><p>list of values to update questionnaire with. List needs to be named,
as the names are going to be used to identify which inputId to update</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="examples-2">Examples<a class="anchor" aria-label="anchor" href="#examples-2"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span class="co">## only run examples in interactive environment</span>

<span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span>

 <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span>
 <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://statismike.github.io/shiny.quetzio/">shiny.quetzio</a></span><span class="op">)</span>

 <span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span>
   <span class="co"># first questionnaire to get values from</span>
   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">6</span>,
          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h1</a></span><span class="op">(</span><span class="st">"Finish first questionnaire"</span><span class="op">)</span>,
          <span class="fu"><a href="../reference/quetzio_UI.html">quetzio_UI</a></span><span class="op">(</span><span class="st">"first_questionnaire"</span><span class="op">)</span>
   <span class="op">)</span>,
   <span class="co"># second questionnaire to update values</span>
   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">6</span>,
          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h1</a></span><span class="op">(</span><span class="st">"Update values of second questionnaire!"</span><span class="op">)</span>,
          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span><span class="st">"update_vals"</span>, <span class="st">"Update values"</span><span class="op">)</span>,
          <span class="va">tags</span><span class="op">$</span><span class="fu">hr</span><span class="op">(</span><span class="op">)</span>,
          <span class="fu"><a href="../reference/quetzio_UI.html">quetzio_UI</a></span><span class="op">(</span><span class="st">"second_questionnaire"</span><span class="op">)</span>
   <span class="op">)</span>
 <span class="op">)</span>

 <span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span>

   <span class="va">quetzio_1st</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/quetzio_server.html">quetzio_server</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
     source_method <span class="op">=</span> <span class="st">"raw"</span>,
     source_object <span class="op">=</span> <span class="va">quetzio_examples</span><span class="op">$</span><span class="va">questions_lists</span><span class="op">$</span><span class="va">simple_quetzio</span>,
     module_id <span class="op">=</span> <span class="st">"first_questionnaire"</span>
   <span class="op">)</span>
   <span class="va">quetzio_2nd</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/quetzio_server.html">quetzio_server</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>
     source_method <span class="op">=</span> <span class="st">"raw"</span>,
     source_object <span class="op">=</span> <span class="va">quetzio_examples</span><span class="op">$</span><span class="va">questions_lists</span><span class="op">$</span><span class="va">simple_quetzio</span>,
     module_id <span class="op">=</span> <span class="st">"second_questionnaire"</span>
   <span class="op">)</span>

   <span class="co"># update values on button press</span>
   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">update_vals</span>, <span class="op">{</span>
     <span class="co"># you can use answers from one questionnaire to update another, though</span>
     <span class="co"># the used values can be any other static named list</span>
     <span class="va">quetzio_2nd</span><span class="op">$</span><span class="fu">update_values</span><span class="op">(</span><span class="va">quetzio_1st</span><span class="op">$</span><span class="fu">answers</span><span class="op">(</span><span class="op">)</span><span class="op">)</span>
   <span class="op">}</span><span class="op">)</span>
 <span class="op">}</span>
 <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span>
<span class="op">}</span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span class="va">quetzio_server</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="co">## ------------------------------------------------</span></span>
<span class="r-in"><span class="co">## Method `quetzio_server$new`</span></span>
<span class="r-in"><span class="co">## ------------------------------------------------</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Only run example in interactive R sessions</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"></span>
<span class="r-in"> <span class="co"># load libraries</span></span>
<span class="r-in"> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span class="r-in"> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://statismike.github.io/shiny.quetzio/">shiny.quetzio</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"> <span class="co"># create ui</span></span>
<span class="r-in"> <span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span class="r-in">   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">6</span>, align <span class="op">=</span> <span class="st">"center"</span>,</span>
<span class="r-in">          <span class="co"># bind the UI with correct module_id</span></span>
<span class="r-in">          <span class="fu"><a href="quetzio_UI.html">quetzio_UI</a></span><span class="op">(</span><span class="st">"my_quetzio"</span><span class="op">)</span></span>
<span class="r-in">   <span class="op">)</span>,</span>
<span class="r-in">   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">6</span>,</span>
<span class="r-in">          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h2</a></span><span class="op">(</span><span class="st">"State of"</span>, <span class="va">tags</span><span class="op">$</span><span class="fu">i</span><span class="op">(</span><span class="st">"quetzio_server"</span><span class="op">)</span><span class="op">)</span>,</span>
<span class="r-in">          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Is it done?"</span><span class="op">)</span>,</span>
<span class="r-in">          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">verbatimTextOutput</a></span><span class="op">(</span><span class="st">"quetzio_is_done"</span><span class="op">)</span>,</span>
<span class="r-in">          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Error messages?"</span><span class="op">)</span>,</span>
<span class="r-in">          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">verbatimTextOutput</a></span><span class="op">(</span><span class="st">"quetzio_message"</span><span class="op">)</span>,</span>
<span class="r-in">          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h3</a></span><span class="op">(</span><span class="st">"Answers"</span><span class="op">)</span>,</span>
<span class="r-in">          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">verbatimTextOutput</a></span><span class="op">(</span><span class="st">"quetzio_answers"</span><span class="op">)</span></span>
<span class="r-in">   <span class="op">)</span></span>
<span class="r-in"> <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"> <span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"></span>
<span class="r-in">   <span class="co"># initialize new quetzio</span></span>
<span class="r-in">   <span class="va">questionnaire</span> <span class="op">&lt;-</span> <span class="va">quetzio_server</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span class="r-in">     <span class="co"># load questions from R object</span></span>
<span class="r-in">     source_method <span class="op">=</span> <span class="st">"raw"</span>,</span>
<span class="r-in">     source_object <span class="op">=</span> <span class="va">quetzio_examples</span><span class="op">$</span><span class="va">questions_lists</span><span class="op">$</span><span class="va">simple_quetzio</span>,</span>
<span class="r-in">     <span class="co"># optionally add descriptions</span></span>
<span class="r-in">     desc_object <span class="op">=</span> <span class="va">quetzio_examples</span><span class="op">$</span><span class="va">description_lists</span><span class="op">$</span><span class="va">simple_quetzio</span>,</span>
<span class="r-in">     <span class="co"># use the same module_id as in UI binding</span></span>
<span class="r-in">     module_id <span class="op">=</span> <span class="st">"my_quetzio"</span>,</span>
<span class="r-in">     <span class="co"># custom_css to give margin but not center options explicitly</span></span>
<span class="r-in">     <span class="co"># it will affect only elements within the form div</span></span>
<span class="r-in">     custom_css <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span class="r-in">       <span class="st">"shiny-options-group"</span> <span class="op">=</span> <span class="st">"text-align: left; margin-left: 45%"</span></span>
<span class="r-in">     <span class="op">)</span>,</span>
<span class="r-in">     <span class="co"># you can also optionally give div unique id - useful for external styling</span></span>
<span class="r-in">     div_id <span class="op">=</span> <span class="st">"my_questio_div_id"</span></span>
<span class="r-in">   <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">   <span class="co"># render objects to show your questionnaire status</span></span>
<span class="r-in"> <span class="va">output</span><span class="op">$</span><span class="va">quetzio_is_done</span> <span class="op">&lt;-</span></span>
<span class="r-in">     <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html" class="external-link">renderPrint</a></span><span class="op">(</span><span class="va">questionnaire</span><span class="op">$</span><span class="fu">is_done</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in">   <span class="va">output</span><span class="op">$</span><span class="va">quetzio_message</span> <span class="op">&lt;-</span></span>
<span class="r-in">     <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html" class="external-link">renderPrint</a></span><span class="op">(</span><span class="va">questionnaire</span><span class="op">$</span><span class="fu">message</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in">   <span class="va">output</span><span class="op">$</span><span class="va">quetzio_answers</span> <span class="op">&lt;-</span></span>
<span class="r-in">     <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html" class="external-link">renderPrint</a></span><span class="op">(</span><span class="va">questionnaire</span><span class="op">$</span><span class="fu">answers</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"> <span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## ------------------------------------------------</span></span>
<span class="r-in"><span class="co">## Method `quetzio_server$update_labels`</span></span>
<span class="r-in"><span class="co">## ------------------------------------------------</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## only run examples in interactive environment</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"></span>
<span class="r-in"> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span class="r-in"> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://statismike.github.io/shiny.quetzio/">shiny.quetzio</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"> <span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span class="r-in">   <span class="co"># some input to trigger label update</span></span>
<span class="r-in">   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/selectInput.html" class="external-link">selectizeInput</a></span><span class="op">(</span><span class="st">"gender"</span>, <span class="st">"What is your gender?"</span>,</span>
<span class="r-in">                  choices <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Male"</span> <span class="op">=</span> <span class="st">"M"</span>,</span>
<span class="r-in">                              <span class="st">"Female"</span> <span class="op">=</span> <span class="st">"F"</span>,</span>
<span class="r-in">                              <span class="st">"I identify as neither of above"</span> <span class="op">=</span> <span class="st">"O"</span>,</span>
<span class="r-in">                              <span class="st">"Prefer not to say"</span> <span class="op">=</span> <span class="st">"NI"</span><span class="op">)</span>,</span>
<span class="r-in">                  selected <span class="op">=</span> <span class="st">"NI"</span><span class="op">)</span>,</span>
<span class="r-in">   <span class="va">tags</span><span class="op">$</span><span class="fu">hr</span><span class="op">(</span><span class="op">)</span>,</span>
<span class="r-in">   <span class="co"># quetzio to update labels</span></span>
<span class="r-in">   <span class="fu"><a href="quetzio_UI.html">quetzio_UI</a></span><span class="op">(</span><span class="st">"updating_labels"</span><span class="op">)</span></span>
<span class="r-in"> <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"> <span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"></span>
<span class="r-in">   <span class="va">quetzio</span> <span class="op">&lt;-</span> <span class="va">quetzio_server</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span class="r-in">     source_method <span class="op">=</span> <span class="st">"raw"</span>,</span>
<span class="r-in">     source_object <span class="op">=</span> <span class="va">quetzio_examples</span><span class="op">$</span><span class="va">questions_lists</span><span class="op">$</span><span class="va">gender_update</span>,</span>
<span class="r-in">     module_id <span class="op">=</span> <span class="st">"updating_labels"</span></span>
<span class="r-in">   <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">   <span class="co"># trigger need to be reactive</span></span>
<span class="r-in">   <span class="va">gender_react</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/reactive.html" class="external-link">reactive</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">gender</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">   <span class="co"># update labels method call</span></span>
<span class="r-in">   <span class="va">quetzio</span><span class="op">$</span><span class="fu">update_labels</span><span class="op">(</span></span>
<span class="r-in">     trigger <span class="op">=</span> <span class="va">gender_react</span>,</span>
<span class="r-in">     source_method <span class="op">=</span> <span class="st">"raw"</span>,</span>
<span class="r-in">     source_object <span class="op">=</span> <span class="va">quetzio_examples</span><span class="op">$</span><span class="va">label_update</span><span class="op">$</span><span class="va">gender_update</span></span>
<span class="r-in">   <span class="op">)</span></span>
<span class="r-in"> <span class="op">}</span></span>
<span class="r-in"> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## ------------------------------------------------</span></span>
<span class="r-in"><span class="co">## Method `quetzio_server$update_values`</span></span>
<span class="r-in"><span class="co">## ------------------------------------------------</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## only run examples in interactive environment</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"></span>
<span class="r-in"> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.rstudio.com/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span class="r-in"> <span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://statismike.github.io/shiny.quetzio/">shiny.quetzio</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"> <span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/fluidPage.html" class="external-link">fluidPage</a></span><span class="op">(</span></span>
<span class="r-in">   <span class="co"># first questionnaire to get values from</span></span>
<span class="r-in">   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">6</span>,</span>
<span class="r-in">          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h1</a></span><span class="op">(</span><span class="st">"Finish first questionnaire"</span><span class="op">)</span>,</span>
<span class="r-in">          <span class="fu"><a href="quetzio_UI.html">quetzio_UI</a></span><span class="op">(</span><span class="st">"first_questionnaire"</span><span class="op">)</span></span>
<span class="r-in">   <span class="op">)</span>,</span>
<span class="r-in">   <span class="co"># second questionnaire to update values</span></span>
<span class="r-in">   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/column.html" class="external-link">column</a></span><span class="op">(</span><span class="fl">6</span>,</span>
<span class="r-in">          <span class="fu"><a href="https://rdrr.io/pkg/htmltools/man/builder.html" class="external-link">h1</a></span><span class="op">(</span><span class="st">"Update values of second questionnaire!"</span><span class="op">)</span>,</span>
<span class="r-in">          <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/actionButton.html" class="external-link">actionButton</a></span><span class="op">(</span><span class="st">"update_vals"</span>, <span class="st">"Update values"</span><span class="op">)</span>,</span>
<span class="r-in">          <span class="va">tags</span><span class="op">$</span><span class="fu">hr</span><span class="op">(</span><span class="op">)</span>,</span>
<span class="r-in">          <span class="fu"><a href="quetzio_UI.html">quetzio_UI</a></span><span class="op">(</span><span class="st">"second_questionnaire"</span><span class="op">)</span></span>
<span class="r-in">   <span class="op">)</span></span>
<span class="r-in"> <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"> <span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"></span>
<span class="r-in">   <span class="va">quetzio_1st</span> <span class="op">&lt;-</span> <span class="va">quetzio_server</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span class="r-in">     source_method <span class="op">=</span> <span class="st">"raw"</span>,</span>
<span class="r-in">     source_object <span class="op">=</span> <span class="va">quetzio_examples</span><span class="op">$</span><span class="va">questions_lists</span><span class="op">$</span><span class="va">simple_quetzio</span>,</span>
<span class="r-in">     module_id <span class="op">=</span> <span class="st">"first_questionnaire"</span></span>
<span class="r-in">   <span class="op">)</span></span>
<span class="r-in">   <span class="va">quetzio_2nd</span> <span class="op">&lt;-</span> <span class="va">quetzio_server</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span></span>
<span class="r-in">     source_method <span class="op">=</span> <span class="st">"raw"</span>,</span>
<span class="r-in">     source_object <span class="op">=</span> <span class="va">quetzio_examples</span><span class="op">$</span><span class="va">questions_lists</span><span class="op">$</span><span class="va">simple_quetzio</span>,</span>
<span class="r-in">     module_id <span class="op">=</span> <span class="st">"second_questionnaire"</span></span>
<span class="r-in">   <span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in">   <span class="co"># update values on button press</span></span>
<span class="r-in">   <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/observeEvent.html" class="external-link">observeEvent</a></span><span class="op">(</span><span class="va">input</span><span class="op">$</span><span class="va">update_vals</span>, <span class="op">{</span></span>
<span class="r-in">     <span class="co"># you can use answers from one questionnaire to update another, though</span></span>
<span class="r-in">     <span class="co"># the used values can be any other static named list</span></span>
<span class="r-in">     <span class="va">quetzio_2nd</span><span class="op">$</span><span class="fu">update_values</span><span class="op">(</span><span class="va">quetzio_1st</span><span class="op">$</span><span class="fu">answers</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in">   <span class="op">}</span><span class="op">)</span></span>
<span class="r-in"> <span class="op">}</span></span>
<span class="r-in"> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Michal Kosinski, Alexander Lam, Erez Shomron, Eric Fletcher.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

    </footer></div>

  

  

  </body></html>

